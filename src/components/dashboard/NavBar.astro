---
// filepath: /Users/alessandro-giuzio/Documents/Ale/GitHub-Repo/books/src/components/dashboard/NavBar.astro
import AddBookForm from './AddBookForm.astro';
const currentPath = Astro.url.pathname;

function activeLink(path: string) {
  return currentPath === path || currentPath.startsWith(`${path}/`)
    ? 'bg-basque-10 text-white font-semibold uppercase'
    : 'text-gray-100';
}
---

<nav class='bg-gray-800 overflow-x-hidden'>
  <div class='mx-auto max-w-7xl px-4 sm:px-6 lg:px-8'>
    <div class='flex h-16 items-center justify-between'>
      <!-- Navigation Links (Hidden on mobile, visible on md+) -->
      <ul class='hidden md:flex space-x-4'>
        <li>
          <a
            href='/'
            class={`block py-2 px-4 rounded-lg transition-all text-sm font-semibold hover:bg-basque-20 ${activeLink('/')}`}>
            Home
          </a>
        </li>
        <li>
          <a
            href='/liburuak'
            class={`block py-2 px-4 rounded-lg transition-all text-sm font-semibold hover:bg-basque-20 ${activeLink('/liburuak')}`}>
            Liburuak
          </a>
        </li>
        <li>
          <a
            href='/lehiakideak'
            class={`block py-2 px-4 rounded-lg transition-all text-sm font-semibold hover:bg-basque-20 ${activeLink('/lehiakideak')}`}>
            Lehiakideak
          </a>
        </li>
        <li>
          <a
            href='/2024'
            class={`block py-2 px-4 rounded-lg transition-all text-sm font-semibold hover:bg-basque-20 ${activeLink('/2024')}`}>
            2024
          </a>
        </li>
      </ul>

      <!-- Mobile menu button (Visible on mobile only) -->
      <div class='md:hidden flex-1'>
        <button
          id='mobile-menu-button'
          class='text-gray-100 hover:text-white p-2 rounded-md hover:bg-basque-20 transition-colors'>
          <svg
            class='h-6 w-6'
            fill='none'
            viewBox='0 0 24 24'
            stroke='currentColor'>
            <path
              stroke-linecap='round'
              stroke-linejoin='round'
              stroke-width='2'
              d='M4 6h16M4 12h16M4 18h16'></path>
          </svg>
        </button>
      </div>

      <!-- Add Book Form (Always visible) -->
      <div class='flex-shrink-0'>
        <AddBookForm />
      </div>
    </div>

    <!-- Mobile Navigation Menu (Hidden by default) -->
    <div id='mobile-menu' class='md:hidden hidden border-t border-gray-700'>
      <ul class='px-2 pt-2 pb-3 space-y-1'>
        <li>
          <a
            href='/'
            class={`block py-2 px-3 rounded-md text-sm font-medium hover:bg-basque-20 transition-colors ${activeLink('/')}`}>
            Home
          </a>
        </li>
        <li>
          <a
            href='/liburuak'
            class={`block py-2 px-3 rounded-md text-sm font-medium hover:bg-basque-20 transition-colors ${activeLink('/liburuak')}`}>
            Liburuak
          </a>
        </li>
        <li>
          <a
            href='/lehiakideak'
            class={`block py-2 px-3 rounded-md text-sm font-medium hover:bg-basque-20 transition-colors ${activeLink('/lehiakideak')}`}>
            Lehiakideak
          </a>
        </li>
        <li>
          <a
            href='/2024'
            class={`block py-2 px-3 rounded-md text-sm font-medium hover:bg-basque-20 transition-colors ${activeLink('/2024')}`}>
            2024
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<script>
  // Mobile menu toggle functionality
  document.addEventListener('DOMContentLoaded', () => {
    const menuButton = document.getElementById('mobile-menu-button');
    const menu = document.getElementById('mobile-menu');

    if (menuButton && menu) {
      menuButton.addEventListener('click', () => {
        menu.classList.toggle('hidden');

        // Optional: Change hamburger to X icon
        const svg = menuButton.querySelector('svg path');
        if (menu.classList.contains('hidden')) {
          svg?.setAttribute('d', 'M4 6h16M4 12h16M4 18h16'); // Hamburger
        } else {
          svg?.setAttribute('d', 'M6 18L18 6M6 6l12 12'); // X
        }
      });
    }
  });
</script>
