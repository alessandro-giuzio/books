---
import { Image } from 'astro:assets';
export interface Props {
  libro: {
    cover?: string;
    title: string;
    author: string;
    concorrente: string;
    punti: number;
    yearRead: number | string;
    body: string;
    slug: string;
  };
}
export interface Props {
  relatedBooks: {
    cover?: string;
    title: string;
    author: string;
    concorrente: string;
    punti: number;
    yearRead: number | string;
    body: string;
    slug: string;
  }[];
}

const { libro, relatedBooks } = Astro.props;
---

<article>
  <!-- Image -->
  <section
    class='relative w-full h-auto max-h-screen flex justify-center items-center bg-basque-10 p-4 rounded-lg shadow-2xl'>
    <Image
      src={libro.cover || '/no-cover.webp'}
      alt={`Cover of ${libro.title}`}
      width={400}
      height={600}
      format='webp'
      class:list={[
        'w-auto',
        'max-h-[90vh]',
        'object-contain',
        'mx-auto',
        'rounded-lg',
        'shadow-2xl',
      ]}
    />
  </section>
  <!-- Book Details -->
  <section class='max-w-3xl mx-auto p-6 bg-basque-40 shadow-lg rounded-lg mt-6'>
    <h2 class='text-2xl md:text-4xl font-semibold text-gray-900'>
      {libro.title}
    </h2>
    <span class='text-lg text-gray-700 mt-1'>by {libro.author}</span>

    <!-- Book Metadata -->
    <div class='flex flex-wrap gap-6 mt-4 text-gray-600 text-sm md:text-base'>
      <span class='font-semibold'
        >üèÜ Concorrente: {
          libro.concorrente.charAt(0).toUpperCase() + libro.concorrente.slice(1)
        }</span
      >
      <span class='font-semibold flex items-center gap-1'>
        ‚≠ê Puntuak: <span class='text-basque-20 font-bold'>{libro.punti}</span>
      </span>
      <span class='font-semibold'
        >üìÖ Year Read: <span class='text-basque-20'>{libro.yearRead}</span
        ></span
      >
    </div>

    <!-- Book Description -->
    <p class='mt-6 text-gray-800 leading-relaxed'>{libro.body}</p>
  </section>
  <!-- Related books -->
  <section class='max-w-3xl mx-auto p-6 bg-basque-40 shadow-lg rounded-lg mt-6'>
    <!-- need to show a grid with 2/3 books with related tags -->

    <h3 class='text-2xl md:text-4xl font-semibold text-gray-900'>
      Related Books
    </h3>
    <span>
      {
        relatedBooks.map(book => (

            <Image
              src={book.cover || '/no-cover.webp'}
              alt={`Cover of ${book.title}`}
              width={200}
              height={300}
              format='webp'
              class:list={[
                'w-auto',
                'max-h-[45vh]',
                'object-contain',
                'mx-auto',
                'rounded-lg',
                'shadow-2xl',
              ]}
            />
            <h4 class='text-xl font-semibold text-gray-900'>{book.title}</h4>
            <span class='text-lg text-gray-700 mt-1'>by {book.author}</span>

        ))
      }
    </span>
  </section>
</article>
